package ch.hevs.boe.entity.mob

import ch.hevs.boe.GenStuff.CollisionGroupNames.CollisionGroupNames
import ch.hevs.boe.GenStuff.{CollisionGroupNames, CollisionList}
import ch.hevs.boe.entity.Entity
import ch.hevs.boe.entity.player.Player
import ch.hevs.boe.physics.{CollisionManager, Position}


<<<<<<< HEAD
abstract class Mob(position: Position, width: Int, height: Int) extends Entity(position, width, height) {
  var selfInit: Boolean = false
=======
abstract class Mob(position: Position, width: Int, height: Int, private val callbackOnKilled: (Mob) => Unit) extends Entity(position, width, height) {
>>>>>>> e01bdf8c5455bb61abd97b6b2ce52b6c78fd1f60
  protected val contactDamage: Int

  override def getCollisionGroup(): CollisionGroupNames = CollisionGroupNames.Enemy

  override def collision(list: CollisionList) = {
    for(g <- list) {
      g._1 match {
        case CollisionGroupNames.Player => {
          val pl: Player = g._2.asInstanceOf[Player]
          pl.damageEntity(contactDamage)
        }
        case CollisionGroupNames.Wall => {
          restorePreviousPosition()
        }
        case _ => {

        }
      }
    }
  }
<<<<<<< HEAD
  override protected def _dispose(): Unit = {
    super._dispose()
=======
  override def kill(): Unit = {
    super.kill()
    callbackOnKilled(this)
>>>>>>> e01bdf8c5455bb61abd97b6b2ce52b6c78fd1f60
    println("A mob has been killed !!!")
  }
}
